#!/usr/bin/env bash
# Environment Variables for Bare-Metal Automation
# Copy this file to .env and fill in your values
# Load with: source .env  (or use direnv for automatic loading)

# ========================================
# BMC Discovery Credentials
# ========================================
# Username for BMC Redfish API access (typically 'root' or 'admin')
# Used by: discovery role, lifecycle playbook
export BMC_USERNAME="admin"

# Password for BMC authentication
# Used by: discovery role, lifecycle playbook
export BMC_PASSWORD=""

# ========================================
# NetBox Connection
# ========================================
# NetBox instance URL (including https://)
# Used by: nb_register role, lifecycle playbook
export NETBOX_URL="https://netbox.example.com"

# NetBox API token (generate from NetBox UI: User > API Tokens)
# Required permissions: dcim.*, extras.*, ipam.*
# Used by: nb_register role, lifecycle playbook
export NETBOX_TOKEN=""

# Certificate validation (set to 'false' for self-signed certs in dev/test)
# IMPORTANT: Always use 'true' in production environments
# Used by: nb_register role
export NETBOX_VALIDATE_CERTS="true"

# ========================================
# Ansible Configuration
# ========================================
# Ansible verbosity level (0=normal, 1=verbose, 2=more verbose, 3+=debug)
# export ANSIBLE_VERBOSITY=0

# Python interpreter for Ansible
# export ANSIBLE_PYTHON_INTERPRETER="/usr/bin/python3"

# ========================================
# Discovery Configuration
# ========================================
# Override default discovery artifact directory
# Default: ansible/playbooks/../artifacts
# export DISCOVERY_ARTIFACT_DIR="/path/to/artifacts"

# Lifecycle state for newly discovered devices
# Valid values: discovered, commissioned, deployed, repurpose-ready
# export DISCOVERY_LIFECYCLE_STATE="discovered"

# ========================================
# NetBox Registration Configuration
# ========================================
# Auto-create missing NetBox objects (site, device role, device type, rack)
# export NB_AUTO_CREATE_REFS="false"

# Default site for devices when BMC name doesn't contain site prefix
# export NB_DEFAULT_SITE=""

# Default device role for new devices
# export NB_DEFAULT_DEVICE_ROLE="Server"

# Lifecycle tag replacement behavior
# If true: Always replace existing lifecycle tags with 'discovered' tag
# If false: Only apply 'discovered' tag if device has no lifecycle tags
# export NB_LIFECYCLE_FORCE_OVERWRITE="false"

# ========================================
# Kea DHCP Configuration (for kea_deploy role)
# ========================================
# Network interface for DHCP server
# export KEA_INTERFACE="enp23s0f0np0"

# Subnet configuration
# export KEA_SUBNET_CIDR="172.30.16.0/22"
# export KEA_POOL_START="172.30.19.24"
# export KEA_POOL_END="172.30.19.100"
# export KEA_GATEWAY="172.30.16.1"

# DNS configuration
# export KEA_DNS_SERVERS="192.168.204.52"
# export KEA_DOMAIN_NAME="site.com"

# Lease monitor configuration
# export KEA_ENABLE_LEASE_MONITOR="true"
# export KEA_LEASE_MONITOR_POLL_INTERVAL="30"
# export KEA_LEASE_MONITOR_LOG_LEVEL="INFO"

# ========================================
# Security Notes
# ========================================
# - NEVER commit .env to version control (already in .gitignore)
# - Use strong, unique passwords for BMC access
# - Rotate NetBox tokens regularly (every 90 days recommended)
# - Consider using Ansible Vault for production credentials
# - Restrict .env file permissions: chmod 600 .env
# - Use ansible-vault encrypt_string for sensitive playbook variables

# ========================================
# Usage Examples
# ========================================
# Load environment variables:
#   source .env
#
# Verify variables are set:
#   env | grep -E '^(BMC|NETBOX|KEA)_'
#
# Run discovery with environment variables:
#   cd ansible
#   source ../.env
#   ansible-playbook playbooks/discovery.yml -e @path/to/bmc-targets.yml
#
# Run registration with environment variables:
#   ansible-playbook playbooks/register.yml
#
# Deploy Kea DHCP with environment variables:
#   ansible-playbook playbooks/kea_deploy.yml
