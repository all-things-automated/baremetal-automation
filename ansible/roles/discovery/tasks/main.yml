---
# tasks file for discovery

- name: Validate required variables are defined
  ansible.builtin.assert:
    that:
      - lookup('vars', item, default='') | length > 0
    fail_msg: "Required variable '{{ item }}' is not defined"
    quiet: true
  loop: "{{ discovery_required_vars }}"
  tags: [always, validation]

- name: Include BMC query tasks
  ansible.builtin.include_tasks: query.yml
  tags: [query, redfish]

- name: Include artifact rendering tasks
  ansible.builtin.include_tasks: render.yml
  tags: [render, artifacts]
